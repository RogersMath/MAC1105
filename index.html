<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Who Wants To Be A History Buff?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
    <div id="game-container" class="bg-white p-8 rounded-lg shadow-lg max-w-2xl w-full">
        <h1 class="text-3xl font-bold text-center mb-6 text-blue-600">Who Wants To Be A History Buff?</h1>
        <div id="start-menu" class="text-center">
            <button id="start-button" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">Start Game</button>
        </div>
        <div id="game-content" class="hidden">
            <div id="question-container" class="mb-6">
                <p id="question" class="text-xl font-semibold mb-4"></p>
                <div id="answers" class="grid grid-cols-1 gap-4"></div>
            </div>
            <div id="result" class="text-center mb-4 font-bold"></div>
            <div id="progress" class="mb-4">
                <div class="bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            <p id="score" class="text-center font-semibold"></p>
        </div>
    </div>

    <audio id="backgroundMusic" loop>
        <source src="backgroundMusic.mp3" type="audio/mpeg">
    </audio>
    <audio id="correctSound">
        <source src="correct.mp3" type="audio/mpeg">
    </audio>
    <audio id="incorrectSound">
        <source src="incorrect.mp3" type="audio/mpeg">
    </audio>

    <script src="questions.js"></script>
    <script>
        let questions = [];
        let currentQuestion = 0;
        let score = 0;

        const startMenu = document.getElementById('start-menu');
        const gameContent = document.getElementById('game-content');
        const startButton = document.getElementById('start-button');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const correctSound = document.getElementById('correctSound');
        const incorrectSound = document.getElementById('incorrectSound');

        startButton.addEventListener('click', startGame);

        function startGame() {
            startMenu.classList.add('hidden');
            gameContent.classList.remove('hidden');
            backgroundMusic.play();
            selectRandomQuestions();
            loadQuestion();
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function selectRandomQuestions() {
            shuffleArray(allQuestions);
            questions = allQuestions.slice(0, 5);
        }

        function loadQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('question').textContent = question.question;
            const answersContainer = document.getElementById('answers');
            answersContainer.innerHTML = '';
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.textContent = answer;
                button.className = 'bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded fade-in';
                button.onclick = () => selectAnswer(index);
                answersContainer.appendChild(button);
            });
            updateProgress();
        }

        function selectAnswer(index) {
            const question = questions[currentQuestion];
            const resultElement = document.getElementById('result');
            const selectedButton = document.getElementById('answers').children[index];
            
            if (index === question.correct) {
                resultElement.textContent = "Correct!";
                resultElement.className = 'text-green-600 fade-in';
                selectedButton.classList.remove('bg-blue-500', 'hover:bg-blue-600');
                selectedButton.classList.add('bg-green-500', 'hover:bg-green-600');
                correctSound.play();
                score++;
            } else {
                resultElement.textContent = "Incorrect. The correct answer was: " + question.answers[question.correct];
                resultElement.className = 'text-red-600 fade-in';
                selectedButton.classList.remove('bg-blue-500', 'hover:bg-blue-600');
                selectedButton.classList.add('bg-red-500', 'hover:bg-red-600');
                incorrectSound.play();
            }
            
            document.getElementById('score').textContent = `Score: ${score}/${questions.length}`;
            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                setTimeout(() => {
                    selectedButton.classList.remove('bg-green-500', 'bg-red-500', 'hover:bg-green-600', 'hover:bg-red-600');
                    selectedButton.classList.add('bg-blue-500', 'hover:bg-blue-600');
                    loadQuestion();
                }, 2000);
            } else {
                setTimeout(endGame, 2000);
            }
        }

        function updateProgress() {
            const progress = (currentQuestion / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        function endGame() {
            const container = document.getElementById('game-container');
            container.innerHTML = `
                <h1 class="text-3xl font-bold text-center mb-6 text-blue-600">Quiz Completed!</h1>
                <p class="text-xl text-center mb-4">Your final score: ${score}/${questions.length}</p>
                <button onclick="restartGame()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded block mx-auto">Play Again</button>
            `;
        }

        function restartGame() {
            currentQuestion = 0;
            score = 0;
            const container = document.getElementById('game-container');
            container.innerHTML = `
                <h1 class="text-3xl font-bold text-center mb-6 text-blue-600">Who Wants To Be A History Buff?</h1>
                <div id="start-menu" class="text-center">
                    <button id="start-button" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">Start Game</button>
                </div>
                <div id="game-content" class="hidden">
                    <div id="question-container" class="mb-6">
                        <p id="question" class="text-xl font-semibold mb-4"></p>
                        <div id="answers" class="grid grid-cols-1 gap-4"></div>
                    </div>
                    <div id="result" class="text-center mb-4 font-bold"></div>
                    <div id="progress" class="mb-4">
                        <div class="bg-gray-200 rounded-full h-2.5">
                            <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>
                    <p id="score" class="text-center font-semibold"></p>
                </div>
            `;
            document.getElementById('start-button').addEventListener('click', startGame);
            backgroundMusic.currentTime = 0;
        }
    </script>
</body>
</html>
